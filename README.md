# Voting API
# Introduction
This application provides ability to vote on restaurants and retrieve the winners. Winner calculation algorithm only takes
into account votes from one day. Each vote has a weight. 1st vote has vote 1, 2nd vote weight 0.5, all subsequent votes -
0.25. If two restaurants have equal votes, winner is determined by the number of unique votes they have got.

# How to build and run the application
```commandline
docker compose build --no-cache
docker compose up -d
```

This will make server run on port 8000

# Examples of requests
Request to create a voter:
```commandline
curl -d '{"username": "test_user_name", "limit": 5}' -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/users
```

Create a restaurant:
```commandline
curl -d '{"name": "Test restaurant"}' -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/restaurants
```

Retrieve all restaurants:
```commandline
curl -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/restaurants
```

Vote on a restaurant:
```commandline
curl -d '{"user_id": 1}' -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/restaurants/1/vote
```

Get winners:
```commandline
curl -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/restaurants/winners
```

Get winners for specific date, e.g. 2023-02-12:
```commandline
curl -H 'Accept: application/json; indent=4' -H 'Content-type: application/json' -u votingapp:NWXdVnFZYfaNg4kAV5v4 http://127.0.0.1:8000/restaurants/winners?date=2023-02-12
```

# Authentication
All endpoints require basic authentication (username and password are provided in the above examples)

# API documentation and schema
Endpoints documentation, schema and examples generated by spectacular are available on the following endpoint:
```http://127.0.0.1:8000/api/schema/redoc/```